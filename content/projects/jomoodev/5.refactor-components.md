---
title: jomoo.dev 리팩터링-4
description: jomoo.dev 컴포넌트 디렉터리 리팩터링 
date: 2024/01/13
---

# jomoo.dev 리팩터링-4
<div class="flex justify-end text-sm">2024/01/13</div>

### intro
이번 컴포넌트 디렉터리 리팩터링으로 jomoo.dev 프로젝트의 리팩터링을 마칠 예정이다. 그 다음에는 메인 페이지 변경과 프로젝트에 깃헙 링크 추가 등 새로운 기능들을 추가하려 한다.  
컴포넌트 디렉터리의 리팩터링은 복잡한 컴포넌트가 없어 큰 어려움이 없어 보인다. 컴포넌트나 함수의 이름을 좀 더 적절하게 변경하거나 읽기 쉽게 코드의 구조 변경을 중점으로 리팩터링하겠다.  

### 리팩터링 전 components 디렉터리
<img src="/projects/jomoodev/refactor-components/components_directory_before.png" width="250" />

리팩터링 전 components 디렉터리, 어떻게 리팩터링할지 간단하게 설명하겠다. 
우선 components/content 디렉터리에 있는 `ProseCode.vue` 컴포넌트는 nuxt-content의 내장된 Prose component를 덮어쓰기 위한 컴포넌트다. `ProseCode.vue`는 작성한 글(content)에서 코드 블록을 다루는 컴포넌트로, 코드 블록안에 있는 코드 복사 기능을 추가하기 위해 생성했던 컴포넌트다. 해당 컴포넌트는 변경할 부분이 없다.  

`CategoriesMenu.vue` 컴포너트는 jomoo.dev 리팩터링-1에서 추가했던 컴포넌트로 화면 넓이가 md 사이즈보다(`768px`미만) 작을 때 category를 보여주는 컴포넌트다. 이 컴포넌트 또한 변경할 부분은 없어 보인다.  

`ContentCard.vue` 컴포넌트는 category/detail/index 페이지에서 detail 관련 글들을 카드 형태로 보여주기 위해 사용되는 컴포넌트다.  
`IndexContentCard.vue` 컴포넌트는 메인 페이지에서 작성한 글들을 카드 형태로 보여주기 위해 사용되는 컴포넌트다.  
일단 `ContentCard.vue`와 `IndexContentCard.vue`의 어디서 사용되는지 이름이 헷갈린다. 컴포넌트 이름을 좀 더 직관적이게 변경하겠다.  

`listIcon.vue` md 사이즈보다 작을 때 기본 레이아웃 `default.vue`에서 사용하는 아이콘 컴포넌트다. 일단 컴포넌트의 이름이 파스칼 케이스가 아니고, 현재 다른 아이콘들은 nuxt-icon을 이용하고 있다.  
nuxt-icon을 이용하기 전에 만들었던 컴포넌트다. 꼭 필요한 아이콘 컴포넌트가 아니기에, 해당 컴포넌트 파일은 삭제하고 nuxt-icon을 이용하겠다.  

`NoteSideBar.vue`, `ProjectsSideBar.vue` 컴포넌트들은 `sideBar.vue`에서 현재 경로에 맞게 사용되는 컴포넌트들이다. 두 개의 컴포넌트를 사용할 필요없이 현재 경로에 맞게 데이터만 변경하는 식으로 리팩터링하는게 좋을거 같다.  

`PostMoveCard.vue`는 cateogry/detail/post 페이지에서 이전 글이나 다음 글에 대한 정보를 보여주면서, 보여주는 글에 대한 링크 역할을 하는 컴포넌트다. 이전 글 jomoo.dev 리팩터링-3에서 함께 리팩터링했기에 컴포넌트의 이름만 변경하려 한다.  


### `ContendCard.vue`와 `IndexContentCard.vue` 리팩터링
처음에는 `ContendCard.vue`와 `IndexContentCard.vue` 컴포넌트의 이름만 직관적으로 변경하려 했었다. 하지만 두 컴포넌트가 렌더링하는 정보는 동일하기에 하나의 컴포넌트로 통합했다.

#### 리팩터링 결과 `PostCard.vue`

### `listIcon.vue` 리팩터링 
`listIcon.vue` 컴포넌트를 삭제하고, 대신 nuxt-icon을 이용하도록 변경
#### `default.vue` 
```vue
<template>
<!-- 변경 전 -->
  <div class="cursor-pointer" @click="toggleCategoriesMenu">
    <ListIcon />
  </div>
<!--  -->
</template>
```

```vue
<template>
<!-- 변경 후 -->
  <div class="cursor-pointer" @click="toggleCategoriesMenu">
    <Icon name="mingcute:menu-line" size="32" />
  </div>
<!--  -->
</template>
```


### `NoteSideBar.vue`와 `ProjectsSideBar.vue` 리팩터링
두 컴포넌트 모두 지우고 `constants/categoriesDetail` 상수 파일에 값을 추가하고, `sideBar.vue` 레이아웃에서 사용해 현재 route에 따라 다른 category details을 렌더링하도록 변경했다.  
category details에 따른 데이터들을 어떤 식으로 다뤄야할지 결정하는게 어려웠다.


---